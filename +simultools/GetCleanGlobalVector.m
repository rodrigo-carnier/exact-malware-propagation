% Computationally efficient function for finding clean devices:
% Instead of looking for clean devices using a loop, list addresses
% of all devices that are clean, and calculate their number

function [addressCleanSorted, numberClean] = GetCleanGlobalVector(network, malware)

switch malware
    case 'SIS'
        % Use function "find" to extract the index (which is the address) of
        % devices satisfying the logical comparisons below
        addressClean = find(network(3,:) == 0);
        
    case 'SIQ'
        % Use function "find" to extract the index (which is the address) of
        % devices satisfying the logical comparisons below
        addressClean = find(network(4,:) == 0);
        
    case 'SEIRS'
        % Use function "find" to extract the index (which is the address) of
        % devices satisfying the logical comparisons below
        addressClean = find(network(3,:) == 0);
end

% If there are uncontaminated devices
if ~isempty(addressClean)
    
    indexAddressCleanSorted = randperm(length(addressClean));

    for i=1:length(indexAddressCleanSorted)
        addressCleanSorted(i) = addressClean(indexAddressCleanSorted(i));
    end

    numberClean = length(addressCleanSorted);

else

    addressCleanSorted = addressClean;
    numberClean = 0;
end

end