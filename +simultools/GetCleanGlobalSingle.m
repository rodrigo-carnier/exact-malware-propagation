% Choose randomically an address not already infected and turned on, and
% different from the sender

function address = GetCleanGlobalSingle(network, malware)

switch malware
    case 'SIS'
        % Use function "find" to extract the index (which is the address) of
        % devices satisfying the logical comparisons below
        addressPossibleDevices = find(network(3,:) == 0);
        
    case 'SIQ'
        % Use function "find" to extract the index (which is the address) of
        % devices satisfying the logical comparisons below
        addressPossibleDevices = find(network(4,:) == 0);
end
% addressPossibleDevices 


% If there are uncontaminated devices
if ~isempty(addressPossibleDevices)
    
    % Use "randperm" to chose a random number between the sequence 1:N, where N
    % is the size of vector addressPossibleDevices (it contains the address of
    % these possible devices).
    chosenIndexOfVector = randperm(length(addressPossibleDevices));
%     chosenIndexOfVector

    % The chosen number is then used as index of vector addressPossibleDevices
    address = addressPossibleDevices(chosenIndexOfVector);
%     address

    %address = randi(param.n);      % Chooses randomically 1 address from the total of devices "param.n".
else
    address = 0;
end

end