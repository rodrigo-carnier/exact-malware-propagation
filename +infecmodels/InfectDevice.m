function [network, network_k1] = InfectDevice(network, network_k1, sender_add, receiver_add, param.IR)

    
%% Getting infected second
    

if network(2, receiver_add) == 1    % If the receiver device is turned on, proceed to threat infection

    if network(3, sender_add)==1
        % Test Infection Rate, if success, then infect receiver's RAM.
        if rand(1) <= param.IR
            network_k1(3, receiver_add) = 1;
        end
    end

    if network(4, sender_add)==1
        % Test Infection Rate, if success, then infect receiver's RAM.
        if rand(1) <= param.IR
            network_k1(4, receiver_add) = 1;
        end
    end

end

end