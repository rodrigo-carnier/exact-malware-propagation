% PURPOSE OF THIS FUNCTION

function [network_k1_infection, newInfections] = AttackSisRandom(network, param)

% Initialize new matrix
network_k1_infection = network;

% Get Vector of Infected Devices (non-sorted)
[addressInfected, numberInfected] = simultools.GetInfectedGlobalVector(network, param.malware);

newInfections = 0;
% waste = 0;
for sender_add=1:numberInfected
    
    receiver_add = simultools.GetRandomGlobalSingle(addressInfected(sender_add), param);
    
    switch param.malware
        case 'SIS'
            if rand(1) <= param.alpha
                if network_k1_infection(3, receiver_add) == 0
                    newInfections = newInfections + 1;
                else
%                     waste = waste +1;
                end
                network_k1_infection(3, receiver_add) = 1;
            end
        case 'SIQ'
            if rand(1) <= param.alpha
                if network_k1_infection(4, receiver_add) == 0
                    newInfections = newInfections + 1;
                end
                network_k1_infection(4, receiver_add) = 1;
            end
    end

    
end
    
% newInfections
% newInfections
% waste
% waste/param.n
end