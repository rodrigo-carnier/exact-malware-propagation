
%% Network matrix

% (1,:) Address of device. The add is a decimal number from 1 to n
% (2,:) Powered or not.    0 - device is turned off. 1 - device is turned on. -1 - device is turned off but will be reset next turn.
% (3,:) MSM Infected or not.   0 - not MSM infected. 1 - devices's MSM is infected.
% (4,:) ACM Infected or not.   0 - not ACM infected. 1 - devices's ACM is infected.

network = inits.InitSisGlobalNetwork(param);

% size(network)

%% Create first cases of contamination (one random device for each type of infection)


switch param.malware
    
    case 'SIS'
        % Start network with one random device with infected MSM
        [firstMSM, numberClean]= simultools.GetCleanGlobalVector(network, param.malware);
        for i=1:param.init_infected_devs
            network(3,firstMSM(i)) = 1;
        end
    case 'SIQ'
        % Start network with one random device with infected ACM
%         firstACM = GetReceiverGlobal(firstMSM, 1, param);
        [firstACM, numberClean]= simultools.GetCleanGlobalVector(network, param.malware);
        for i=1:param.init_infected_devs
            network(4,firstACM(i)) = 1;
        end
end

%% Display first network state

% sum(network(3,:)==1)
% disp('length of network')
% length(network)